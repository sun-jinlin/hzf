{"version":3,"sources":["api/User/index.js","api/House/index.js","components/HousePackage/index.js","components/HousePackage/index.module.css","page/Rent/Add/index.module.css","page/Rent/Add/index.js"],"names":["login","data","request","method","url","getUserInfo","logout","getFavorites","id","mothod","addFavorites","delFavorites","submitHouse","getUserHouses","getSelected","params","getFilterData","cityId","filter","start","end","updataImage","getHouseList","HOUSE_PACKAGE","name","icon","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","indexOf","item","props","onSelect","setState","this","select","list","v","includes","map","isSelected","className","styles","active","join","onClick","root","renderItems","Component","module","exports","alert","roomTypeData","label","value","orientedData","floorData","RentAdd","onCancel","text","onPress","a","history","go","handleChange","val","updata","file","type","index","tempSlides","addHouse","community","price","size","roomType","floor","oriented","title","supporting","description","fd","FormData","forEach","append","status","houseImg","submitData","success","push","replace","pathname","backUrl","location","Item","navHeader","mode","onLeftClick","header","renderHeader","data-role","extra","arrow","placeholder","onChange","cols","pics","files","multiple","imgpicker","accept","selectedItems","desc","rows","autoHeight","bottom","cancel","confirm"],"mappings":"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","file":"static/js/12.bb892cbd.chunk.js","sourcesContent":["// 获取axios\r\nimport request from '../../utils/request'\r\n\r\n\r\n// 用户登录接口\r\nexport function login(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/login',\r\n    data\r\n  })\r\n}\r\n/**\r\n * 获取用户的信息资料\r\n * \r\n */\r\nexport function getUserInfo() {\r\n  return request({\r\n    method: 'get',\r\n    url: '/user',\r\n  })\r\n}\r\n/**\r\n * 登出\r\n * \r\n */\r\nexport function logout() {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/logout'\r\n  })\r\n}\r\n/**\r\n * 房屋是否收藏\r\n */\r\nexport function getFavorites(id) {\r\n  return request({\r\n    mothod: 'get',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n * 添加收藏\r\n */\r\nexport function addFavorites(id) {\r\n  return request({\r\n    method: 'post',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n * 取消收藏\r\n */\r\nexport function delFavorites(id) {\r\n  return request({\r\n    method: 'delete',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n *  发布房源\r\n */\r\nexport function submitHouse(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/houses',\r\n    data\r\n  })\r\n}\r\n/**\r\n *  查看房源列表\r\n */\r\nexport function getUserHouses() {\r\n  return request({\r\n    method: 'get',\r\n    url: '/user/houses',\r\n  })\r\n}","import request from '../../utils/request'\r\n\r\nexport function getSelected(id) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/houses/condition',\r\n    params: { id }\r\n  })\r\n}\r\n\r\n// 根据条件查询房屋\r\nexport function getFilterData(cityId, filter, start = 1, end = 20) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/houses',\r\n    params: {\r\n      cityId,\r\n      ...filter,\r\n      start,\r\n      end\r\n    }\r\n  })\r\n}\r\n//  房屋图像上传\r\nexport function updataImage(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/houses/image',\r\n    data\r\n  })\r\n}\r\n/**\r\n * \r\n查询房源数据\r\n */\r\nexport function getHouseList(id) {\r\n  return request({\r\n    url: '/area/map',\r\n    method: 'get',\r\n    params: { id }\r\n  })\r\n}","import React, { Component } from 'react'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 所有房屋配套数据和图标\r\nconst HOUSE_PACKAGE = [\r\n  {\r\n    id: 1,\r\n    name: '衣柜',\r\n    icon: 'icon-wardrobe'\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '洗衣机',\r\n    icon: 'icon-wash'\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '空调',\r\n    icon: 'icon-air'\r\n  },\r\n  {\r\n    id: 4,\r\n    name: '天然气',\r\n    icon: 'icon-gas'\r\n  },\r\n  {\r\n    id: 5,\r\n    name: '冰箱',\r\n    icon: 'icon-ref'\r\n  },\r\n  {\r\n    id: 6,\r\n    name: '暖气',\r\n    icon: 'icon-Heat'\r\n  },\r\n  {\r\n    id: 7,\r\n    name: '电视',\r\n    icon: 'icon-vid'\r\n  },\r\n  {\r\n    id: 8,\r\n    name: '热水器',\r\n    icon: 'icon-heater'\r\n  },\r\n  {\r\n    id: 9,\r\n    name: '宽带',\r\n    icon: 'icon-broadband'\r\n  },\r\n  {\r\n    id: 10,\r\n    name: '沙发',\r\n    icon: 'icon-sofa'\r\n  }\r\n]\r\n\r\n/* \r\n  该组件的两种功能：\r\n  1 根据传入的 list 展示房屋配置列表（房源详情页面）\r\n    <HousePackage list={['衣柜', '洗衣机']} />\r\n  2 从所有配置列表中选择房屋配置（发布房源页面）\r\n    <HousePackage select onSelect={selectedItems => {...}} />\r\n*/\r\nexport default class HousePackage extends Component {\r\n  state = {\r\n    // 选中名称\r\n    selectedNames: []\r\n  }\r\n\r\n  // 根据id切换选中状态\r\n  toggleSelect = name => {\r\n    const { selectedNames } = this.state\r\n    let newSelectedNames\r\n\r\n    // 判断该项是否选中\r\n    if (selectedNames.indexOf(name) > -1) {\r\n      // 选中：从数组中删除选中项，也就是保留未选中项\r\n      newSelectedNames = selectedNames.filter(item => item !== name)\r\n    } else {\r\n      // 未选中：添加到数组中\r\n      newSelectedNames = [...selectedNames, name]\r\n    }\r\n\r\n    // 传递给父组件\r\n    this.props.onSelect(newSelectedNames)\r\n\r\n    this.setState({\r\n      selectedNames: newSelectedNames\r\n    })\r\n  }\r\n\r\n  // 渲染列表项\r\n  renderItems() {\r\n    const { selectedNames } = this.state\r\n    // select 的值为 true 表示 选择房屋配置；false 表示仅展示房屋列表\r\n    // list 表示要展示的列表项\r\n    const { select, list } = this.props\r\n\r\n    let data\r\n    // 如果传了 select 表示：选择 房屋配置\r\n    // 如果没传 select 表示：展示 房屋配置 列表\r\n    if (select) {\r\n      data = HOUSE_PACKAGE\r\n    } else {\r\n      // 展示房屋配置列表\r\n      // 从所有的列表项中过滤出要展示的（list）列表项\r\n      data = HOUSE_PACKAGE.filter(v => list.includes(v.name))\r\n    }\r\n\r\n    return data.map(item => {\r\n      // 判断该项是否选中\r\n      const isSelected = selectedNames.indexOf(item.name) > -1\r\n\r\n      return (\r\n        <li\r\n          key={item.id}\r\n          className={[styles.item, isSelected ? styles.active : ''].join(' ')}\r\n          onClick={select && (() => this.toggleSelect(item.name))}\r\n        >\r\n          <p>\r\n            <i className={`iconfont ${item.icon} ${styles.icon}`} />\r\n          </p>\r\n          {item.name}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <ul className={styles.root}>{this.renderItems()}</ul>\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HousePackage_root__dFSNh\",\"item\":\"HousePackage_item__36yAZ\",\"active\":\"HousePackage_active__1CQPC\",\"icon\":\"HousePackage_icon__2zMBm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Add_root__2rUOw\",\"bottom\":\"Add_bottom__3E4vM\",\"cancel\":\"Add_cancel__2dGj8\",\"imgpicker\":\"Add_imgpicker__3XR3s\",\"input\":\"Add_input__2GZ7J\",\"label\":\"Add_label__1ZoYq\",\"confirm\":\"Add_confirm__3timf\",\"title\":\"Add_title__1_vQg\",\"pics\":\"Add_pics__TEYET\",\"supporting\":\"Add_supporting__3tuQD\",\"desc\":\"Add_desc__22Oqu\"};","import React, { Component } from 'react'\r\n\r\nimport {\r\n  Flex,\r\n  List,\r\n  InputItem,\r\n  Picker,\r\n  ImagePicker,\r\n  TextareaItem,\r\n  Modal,\r\n  NavBar,\r\n  Icon,\r\n  Toast\r\n} from 'antd-mobile'\r\n\r\nimport HousePackage from '../../../components/HousePackage'\r\n\r\nimport styles from './index.module.css'\r\n// api\r\nimport { updataImage } from '../../../api/House'\r\nimport { submitHouse } from '../../../api/User'\r\n\r\nconst alert = Modal.alert\r\n\r\n// 房屋类型\r\nconst roomTypeData = [\r\n  { label: '一室', value: 'ROOM|d4a692e4-a177-37fd' },\r\n  { label: '二室', value: 'ROOM|d1a00384-5801-d5cd' },\r\n  { label: '三室', value: 'ROOM|20903ae0-c7bc-f2e2' },\r\n  { label: '四室', value: 'ROOM|ce2a5daa-811d-2f49' },\r\n  { label: '四室+', value: 'ROOM|2731c38c-5b19-ff7f' }\r\n]\r\n\r\n// 朝向：\r\nconst orientedData = [\r\n  { label: '东', value: 'ORIEN|141b98bf-1ad0-11e3' },\r\n  { label: '西', value: 'ORIEN|103fb3aa-e8b4-de0e' },\r\n  { label: '南', value: 'ORIEN|61e99445-e95e-7f37' },\r\n  { label: '北', value: 'ORIEN|caa6f80b-b764-c2df' },\r\n  { label: '东南', value: 'ORIEN|dfb1b36b-e0d1-0977' },\r\n  { label: '东北', value: 'ORIEN|67ac2205-7e0f-c057' },\r\n  { label: '西南', value: 'ORIEN|2354e89e-3918-9cef' },\r\n  { label: '西北', value: 'ORIEN|80795f1a-e32f-feb9' }\r\n]\r\n\r\n// 楼层\r\nconst floorData = [\r\n  { label: '高楼层', value: 'FLOOR|1' },\r\n  { label: '中楼层', value: 'FLOOR|2' },\r\n  { label: '低楼层', value: 'FLOOR|3' }\r\n]\r\n\r\nexport default class RentAdd extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const { data } = this.props.location\r\n\r\n    this.state = {\r\n      // 临时图片地址\r\n      tempSlides: [],\r\n\r\n      // 小区的名称和id\r\n      community: {\r\n        name: data?.name,\r\n        id: data?.id\r\n      },\r\n      // 价格\r\n      price: '',\r\n      // 面积\r\n      size: '',\r\n      // 房屋类型\r\n      roomType: '',\r\n      // 楼层\r\n      floor: '',\r\n      // 朝向：\r\n      oriented: '',\r\n      // 房屋标题\r\n      title: '',\r\n      // 房屋图片\r\n      houseImg: '',\r\n      // 房屋配套：\r\n      supporting: '',\r\n      // 房屋描述\r\n      description: ''\r\n    }\r\n  }\r\n\r\n  // 取消编辑，返回上一页\r\n  onCancel = () => {\r\n    alert('提示', '放弃发布房源?', [\r\n      {\r\n        text: '放弃',\r\n        onPress: async () => this.props.history.go(-1)\r\n      },\r\n      {\r\n        text: '继续编辑'\r\n      }\r\n    ])\r\n  }\r\n  // 表单和单选器选中数据\r\n  handleChange = (name, val) => {\r\n    this.setState({\r\n      [name]: val\r\n    })\r\n  }\r\n  // 选中图片\r\n  updata = (file, type, index) => {\r\n    this.setState({\r\n      tempSlides: file\r\n    })\r\n  }\r\n  // 提交\r\n  addHouse = async () => {\r\n    const {\r\n      // 临时图片地址\r\n      tempSlides,\r\n\r\n      // 小区的名称和id\r\n      community,\r\n      // 价格\r\n      price,\r\n      // 面积\r\n      size,\r\n      // 房屋类型\r\n      roomType,\r\n      // 楼层\r\n      floor,\r\n      // 朝向：\r\n      oriented,\r\n      // 房屋标题\r\n      title,\r\n\r\n\r\n      // 房屋配套：\r\n      supporting,\r\n      // 房屋描述\r\n      description\r\n    } = this.state\r\n    // if (!tempSlides.length || !price || !size || !supporting) {\r\n    //   return Toast.info('所填信息不完善，请重新填写', 1)\r\n    // }\r\n    const fd = new FormData()\r\n    tempSlides.forEach(item => fd.append('file', item.file))\r\n    const { status, data } = await updataImage(fd)\r\n    if (status === 200) {\r\n      // 房屋图片\r\n      let houseImg = data.join('|')\r\n\r\n      const submitData = {\r\n        community: community.id,\r\n        // 价格\r\n        price,\r\n        // 面积\r\n        size,\r\n        // 房屋类型\r\n        roomType,\r\n        // 楼层\r\n        floor,\r\n        // 朝向：\r\n        oriented,\r\n        // 房屋标题\r\n        title,\r\n        // 房屋图片\r\n        houseImg,\r\n        // 房屋配套：\r\n        supporting,\r\n        // 房屋描述\r\n        description\r\n      }\r\n      const { status: sta } = await submitHouse(submitData)\r\n      if (sta === 200) {\r\n        Toast.success('发布房源成功！', 1, () => {\r\n          this.props.history.push('/rent')\r\n        })\r\n      } else {\r\n        return Modal.alert('提示', '当前账号未登录，是否登录？', [\r\n          { text: '取消' },\r\n          {\r\n            text: '登录', onPress: () =>\r\n              this.props.history.replace({ pathname: '/login', backUrl: this.props.location.pathname })\r\n          },\r\n        ]);\r\n      }\r\n\r\n    } else {\r\n      return Modal.alert('提示', '当前账号未登录，是否登录？', [\r\n        { text: '取消' },\r\n        {\r\n          text: '登录', onPress: () =>\r\n            this.props.history.replace({ pathname: '/login', backUrl: this.props.location.pathname })\r\n        },\r\n      ]);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  render() {\r\n    const Item = List.Item\r\n    const { history } = this.props\r\n    const {\r\n      community,\r\n      price,\r\n      size,\r\n      roomType,\r\n      floor,\r\n      oriented,\r\n      description,\r\n      tempSlides,\r\n      title\r\n    } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavBar\r\n          className={styles.navHeader}\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={this.onCancel}\r\n        >\r\n          发布房源\r\n        </NavBar>\r\n        <List\r\n          className={styles.header}\r\n          renderHeader={() => '基本信息'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          {/* 选择所在小区 */}\r\n          <Item\r\n            extra={community.name || '请选择小区名称'}\r\n            arrow=\"horizontal\"\r\n            onClick={() => history.replace('/rent/search')}\r\n          >\r\n            小区名称\r\n          </Item>\r\n          <InputItem placeholder=\"请输入租金/月\" extra=\"￥/月\" type=\"number\" value={price} onChange={(v) => this.handleChange('price', v)}>\r\n            租&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金\r\n          </InputItem>\r\n          <InputItem onChange={(v) => this.handleChange('size', v)} placeholder=\"请输入建筑面积\" extra=\"㎡\" type=\"number\" value={size}>\r\n            建筑面积\r\n          </InputItem>\r\n          <Picker onChange={(v) => this.handleChange('roomType', v[0])} data={roomTypeData} value={[roomType]} cols={1}>\r\n            <Item arrow=\"horizontal\">\r\n              户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型\r\n            </Item>\r\n          </Picker>\r\n\r\n          <Picker\r\n            onChange={(v) => this.handleChange('floor', v[0])}\r\n            data={floorData} value={[floor]} cols={1}>\r\n            <Item arrow=\"horizontal\">所在楼层</Item>\r\n          </Picker>\r\n          <Picker onChange={(v) => this.handleChange('oriented', v[0])} data={orientedData} value={[oriented]} cols={1}>\r\n            <Item arrow=\"horizontal\">\r\n              朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向\r\n            </Item>\r\n          </Picker>\r\n        </List>\r\n\r\n        <List\r\n          className={styles.title}\r\n          renderHeader={() => '房屋标题'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <InputItem\r\n            onChange={(v) => this.handleChange('title', v)}\r\n            placeholder=\"请输入标题（例如：整租 小区名 2室 5000元）\"\r\n            value={title}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.pics}\r\n          renderHeader={() => '房屋图像'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <ImagePicker\r\n            onChange={this.updata}\r\n            files={tempSlides}\r\n            multiple={true}\r\n            className={styles.imgpicker}\r\n            accept=\"image/jpg,image/png\"\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.supporting}\r\n          renderHeader={() => '房屋配置'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <HousePackage select onSelect={selectedItems => this.setState({ supporting: selectedItems.join('|') })} />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.desc}\r\n          renderHeader={() => '房屋描述'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <TextareaItem\r\n            onChange={(v) => this.handleChange('description', v)}\r\n            rows={5}\r\n            placeholder=\"请输入房屋描述信息\"\r\n            autoHeight\r\n            value={description}\r\n          />\r\n        </List>\r\n\r\n        <Flex className={styles.bottom}>\r\n          <Flex.Item className={styles.cancel} onClick={this.onCancel}>\r\n            取消\r\n          </Flex.Item>\r\n          <Flex.Item className={styles.confirm} onClick={this.addHouse}>\r\n            提交\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}