{"version":3,"sources":["api/User/index.js","../node_modules/antd-mobile/lib/button/style/css.js","../node_modules/antd-mobile/lib/button/index.js","page/Profile/index.module.css","page/Profile/index.js"],"names":["login","data","request","method","url","getUserInfo","logout","getFavorites","id","mothod","addFavorites","delFavorites","submitHouse","getUserHouses","require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_defineProperty3","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames3","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","_rmcFeedback2","_icon2","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","rxTwoCNChar","isTwoCNChar","test","bind","isString","str","insertSpace","child","type","props","children","cloneElement","split","join","createElement","Button","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_classnames","_a","className","prefixCls","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick","restProps","iconType","wrapCls","kids","Children","map","iconEl","rawCls","cls","undefined","role","Component","defaultProps","module","menus","name","iconfont","to","DEFAULT_AVATAR","BASE_URL","Profile","state","isLogin","isToken","userInfo","a","status","avatar","setState","alert","text","onPress","history","replace","pathname","backUrl","location","description","removeToken","success","styles","root","title","bg","src","alt","info","myIcon","user","nickname","auth","edit","push","arrow","columnNum","hasLine","renderItem","item","menuItem","ad"],"mappings":"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","file":"static/js/13.66ab51f4.chunk.js","sourcesContent":["// 获取axios\r\nimport request from '../../utils/request'\r\n\r\n\r\n// 用户登录接口\r\nexport function login(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/login',\r\n    data\r\n  })\r\n}\r\n/**\r\n * 获取用户的信息资料\r\n * \r\n */\r\nexport function getUserInfo() {\r\n  return request({\r\n    method: 'get',\r\n    url: '/user',\r\n  })\r\n}\r\n/**\r\n * 登出\r\n * \r\n */\r\nexport function logout() {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/logout'\r\n  })\r\n}\r\n/**\r\n * 房屋是否收藏\r\n */\r\nexport function getFavorites(id) {\r\n  return request({\r\n    mothod: 'get',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n * 添加收藏\r\n */\r\nexport function addFavorites(id) {\r\n  return request({\r\n    method: 'post',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n * 取消收藏\r\n */\r\nexport function delFavorites(id) {\r\n  return request({\r\n    method: 'delete',\r\n    url: `/user/favorites/${id}`\r\n  })\r\n}\r\n/**\r\n *  发布房源\r\n */\r\nexport function submitHouse(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/houses',\r\n    data\r\n  })\r\n}\r\n/**\r\n *  查看房源列表\r\n */\r\nexport function getUserHouses() {\r\n  return request({\r\n    method: 'get',\r\n    url: '/user/houses',\r\n  })\r\n}","'use strict';\n\nrequire('../../style/css');\n\nrequire('../../icon/style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _rmcFeedback = require('rmc-feedback');\n\nvar _rmcFeedback2 = _interopRequireDefault(_rmcFeedback);\n\nvar _icon = require('../icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar rxTwoCNChar = /^[\\u4e00-\\u9fa5]{2}$/;\nvar isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);\nfunction isString(str) {\n    return typeof str === 'string';\n}\n// Insert one space between two chinese characters automatically.\nfunction insertSpace(child) {\n    if (isString(child.type) && isTwoCNChar(child.props.children)) {\n        return React.cloneElement(child, {}, child.props.children.split('').join(' '));\n    }\n    if (isString(child)) {\n        if (isTwoCNChar(child)) {\n            child = child.split('').join(' ');\n        }\n        return React.createElement(\n            'span',\n            null,\n            child\n        );\n    }\n    return child;\n}\n\nvar Button = function (_React$Component) {\n    (0, _inherits3['default'])(Button, _React$Component);\n\n    function Button() {\n        (0, _classCallCheck3['default'])(this, Button);\n        return (0, _possibleConstructorReturn3['default'])(this, (Button.__proto__ || Object.getPrototypeOf(Button)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(Button, [{\n        key: 'render',\n        value: function render() {\n            var _classnames;\n\n            var _a = this.props,\n                children = _a.children,\n                className = _a.className,\n                prefixCls = _a.prefixCls,\n                type = _a.type,\n                size = _a.size,\n                inline = _a.inline,\n                disabled = _a.disabled,\n                icon = _a.icon,\n                loading = _a.loading,\n                activeStyle = _a.activeStyle,\n                activeClassName = _a.activeClassName,\n                onClick = _a.onClick,\n                restProps = __rest(_a, [\"children\", \"className\", \"prefixCls\", \"type\", \"size\", \"inline\", \"disabled\", \"icon\", \"loading\", \"activeStyle\", \"activeClassName\", \"onClick\"]);\n            var iconType = loading ? 'loading' : icon;\n            var wrapCls = (0, _classnames3['default'])(prefixCls, className, (_classnames = {}, (0, _defineProperty3['default'])(_classnames, prefixCls + '-primary', type === 'primary'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-ghost', type === 'ghost'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-warning', type === 'warning'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-small', size === 'small'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-inline', inline), (0, _defineProperty3['default'])(_classnames, prefixCls + '-disabled', disabled), (0, _defineProperty3['default'])(_classnames, prefixCls + '-loading', loading), (0, _defineProperty3['default'])(_classnames, prefixCls + '-icon', !!iconType), _classnames));\n            var kids = React.Children.map(children, insertSpace);\n            var iconEl = void 0;\n            if (typeof iconType === 'string') {\n                iconEl = React.createElement(_icon2['default'], { 'aria-hidden': 'true', type: iconType, size: size === 'small' ? 'xxs' : 'md', className: prefixCls + '-icon' });\n            } else if (iconType) {\n                var rawCls = iconType.props && iconType.props.className;\n                var cls = (0, _classnames3['default'])('am-icon', prefixCls + '-icon', size === 'small' ? 'am-icon-xxs' : 'am-icon-md');\n                iconEl = React.cloneElement(iconType, {\n                    className: rawCls ? rawCls + ' ' + cls : cls\n                });\n            }\n            // use div, button native is buggy @yiminghe\n            return React.createElement(\n                _rmcFeedback2['default']\n                // tslint:disable-next-line:jsx-no-multiline-js\n                ,\n                { activeClassName: activeClassName || (activeStyle ? prefixCls + '-active' : undefined), disabled: disabled, activeStyle: activeStyle },\n                React.createElement(\n                    'a',\n                    (0, _extends3['default'])({ role: 'button', className: wrapCls }, restProps, { onClick: disabled ? undefined : onClick, 'aria-disabled': disabled }),\n                    iconEl,\n                    kids\n                )\n            );\n        }\n    }]);\n    return Button;\n}(React.Component);\n\nButton.defaultProps = {\n    prefixCls: 'am-button',\n    size: 'large',\n    inline: false,\n    disabled: false,\n    loading: false,\n    activeStyle: {}\n};\nexports['default'] = Button;\nmodule.exports = exports['default'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Profile_root__2VGsz\",\"title\":\"Profile_title__3R7SC\",\"bg\":\"Profile_bg__aAzOO\",\"info\":\"Profile_info__2qMoZ\",\"auth\":\"Profile_auth__3CduZ\",\"user\":\"Profile_user__1HU6P\",\"myIcon\":\"Profile_myIcon__1E90c\",\"avatar\":\"Profile_avatar__2pWeZ\",\"name\":\"Profile_name__2wUNk\",\"edit\":\"Profile_edit__Q_EKu\",\"arrow\":\"Profile_arrow__15LWP\",\"ad\":\"Profile_ad__FE5ZB\",\"menuItem\":\"Profile_menuItem__1Yt8B\"};","import React, { Component } from 'react'\r\n\r\nimport { Link } from 'react-router-dom'\r\nimport { Grid, Button, Modal, Toast } from 'antd-mobile'\r\n// 基地址\r\nimport { BASE_URL } from '../../utils/request'\r\n\r\nimport styles from './index.module.css'\r\n\r\nimport { isToken, removeToken } from '../../utils/method'\r\n// api\r\nimport { getUserInfo, logout } from '../../api/User'\r\n// 菜单数据\r\nconst menus = [\r\n  { id: 1, name: '我的收藏', iconfont: 'icon-coll', to: '/favorate' },\r\n  { id: 2, name: '我的出租', iconfont: 'icon-ind', to: '/rent' },\r\n  { id: 3, name: '看房记录', iconfont: 'icon-record' },\r\n  {\r\n    id: 4,\r\n    name: '成为房主',\r\n    iconfont: 'icon-identity'\r\n  },\r\n  { id: 5, name: '个人资料', iconfont: 'icon-myinfo' },\r\n  { id: 6, name: '联系我们', iconfont: 'icon-cust' }\r\n]\r\n\r\n// 默认头像\r\nconst DEFAULT_AVATAR = BASE_URL + '/img/profile/avatar.png'\r\n\r\nexport default class Profile extends Component {\r\n  state = {\r\n    isLogin: isToken(),\r\n    userInfo: null\r\n  }\r\n  componentDidMount() {\r\n    // 获取个人信息\r\n    this.getUserInfo()\r\n  }\r\n  // 获取个人信息\r\n  getUserInfo = async () => {\r\n    const { isLogin } = this.state\r\n    if (!isLogin) {\r\n      return\r\n    }\r\n    const { status, data } = await getUserInfo()\r\n\r\n\r\n    if (status === 200) {\r\n      data.avatar = data.avatar ? BASE_URL + data.avatar : null\r\n      this.setState({\r\n        userInfo: data,\r\n      })\r\n    } else {\r\n\r\n      Modal.alert('提示', '当前账号未登录，是否登录？', [\r\n        { text: '取消' },\r\n        {\r\n          text: '登录', onPress: () =>\r\n            this.props.history.replace({ pathname: '/login', backUrl: this.props.location.pathname })\r\n        },\r\n      ]);\r\n\r\n    }\r\n  }\r\n  // 登出\r\n  logout = () => {\r\n    Modal.alert('提示', '确认退出吗???', [\r\n      { text: '取消' },\r\n      {\r\n        text: '确定', onPress: async () => {\r\n          const { status, description } = await logout()\r\n          if (status === 200) {\r\n            removeToken()\r\n            this.setState({ isLogin: false, userInfo: null }, () => {\r\n              this.props.history.replace('/login')\r\n            })\r\n            Toast.success(description, .5)\r\n          }\r\n        }\r\n      },\r\n    ]);\r\n  }\r\n  render() {\r\n    const { history } = this.props\r\n    const { isLogin, userInfo } = this.state\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 个人信息 */}\r\n        <div className={styles.title}>\r\n          <img\r\n            className={styles.bg}\r\n            src={BASE_URL + '/img/profile/bg.png'}\r\n            alt=\"背景图\"\r\n          />\r\n          <div className={styles.info}>\r\n            <div className={styles.myIcon}>\r\n              <img className={styles.avatar} src={userInfo?.avatar || DEFAULT_AVATAR} alt=\"icon\" />\r\n            </div>\r\n            <div className={styles.user}>\r\n              <div className={styles.name}>{userInfo?.nickname}</div>\r\n              {/* 登录后展示： */}\r\n              {isLogin ? <>\r\n                <div className={styles.auth}>\r\n                  <span onClick={this.logout}>退出</span>\r\n                </div>\r\n                <div className={styles.edit} onClick={\r\n                  () => history.push('/rent/add')\r\n                }>\r\n                  发布房源\r\n                  <span className={styles.arrow}>\r\n                    <i className=\"iconfont icon-arrow\" />\r\n                  </span>\r\n                </div>\r\n              </> : <div className={styles.edit}>\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    inline\r\n                    onClick={() => history.push('/login')}\r\n                  >\r\n                    去登录\r\n                </Button>\r\n                </div>}\r\n\r\n\r\n              {/* 未登录展示： */}\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 九宫格菜单 */}\r\n        <Grid\r\n          data={menus}\r\n          columnNum={3}\r\n          hasLine={false}\r\n          renderItem={item =>\r\n            item.to ? (\r\n              <Link to={item.to}>\r\n                <div className={styles.menuItem}>\r\n                  <i className={`iconfont ${item.iconfont}`} />\r\n                  <span>{item.name}</span>\r\n                </div>\r\n              </Link>\r\n            ) : (\r\n                <div className={styles.menuItem}>\r\n                  <i className={`iconfont ${item.iconfont}`} />\r\n                  <span>{item.name}</span>\r\n                </div>\r\n              )\r\n          }\r\n        />\r\n\r\n        {/* 加入我们 */}\r\n        <div className={styles.ad}>\r\n          <img src={BASE_URL + '/img/profile/join.png'} alt=\"\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}