{"version":3,"sources":["../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/HouseItem/index.js","components/HouseItem/index.module.css","api/House/index.js","page/Map/index.module.css","page/Map/index.jsx"],"names":["require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent","restProps","createElement","role","onClick","Component","defaultProps","module","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_defineProperty","configurable","writable","HouseItem","src","title","desc","tags","price","style","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","priceNum","getSelected","id","request","method","url","params","getFilterData","cityId","start","end","updataImage","data","getHouseList","Map","state","list","isShowList","initMap","a","BMap","window","myGeo","Geocoder","getLocalCity","la","label","getPoint","point","centerAndZoom","addOverlay","Marker","addControl","NavigationControl","ScaleControl","OverviewMapControl","MapTypeControl","renderOverlay","addEventListener","setState","toTypeAndZoom","type","zoom","status","item","callBack","coord","longitude","latitude","count","name","Point","opts","position","offset","Size","Label","setStyle","background","border","setContent","bubble","bubbleName","setTimeout","clearOverlays","rect","housename","housenum","arrow","getCityList","mapCenter","zooms","getZoom","changedTouches","startOpsX","clientX","startOpsY","clientY","x","innerWidth","y","innerHeight","panBy","renderHouseList","houseList","show","titleWrap","listTitle","titleMore","href","houseItems","history","houseCode","BASE_URL","houseImg","mapbox","goBack"],"mappings":"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","file":"static/js/11.1cf96717.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  // src: PropTypes.string,\r\n  // title: PropTypes.string,\r\n  // desc: PropTypes.string,\r\n  // tags: PropTypes.array.isRequired,\r\n  // price: PropTypes.number,\r\n  // onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__3IR9g\",\"imgWrap\":\"HouseItem_imgWrap__1is7x\",\"img\":\"HouseItem_img__1srx9\",\"content\":\"HouseItem_content__oprSN\",\"title\":\"HouseItem_title__2-m-B\",\"desc\":\"HouseItem_desc__z3W2H\",\"price\":\"HouseItem_price__3e_Yc\",\"priceNum\":\"HouseItem_priceNum__hysMN\",\"tag\":\"HouseItem_tag__2JRJ7\",\"tag1\":\"HouseItem_tag1__ozAKo\",\"tag2\":\"HouseItem_tag2__3JJ2t\",\"tag3\":\"HouseItem_tag3__37oaQ\"};","import request from '../../utils/request'\r\n\r\nexport function getSelected(id) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/houses/condition',\r\n    params: { id }\r\n  })\r\n}\r\n\r\n// 根据条件查询房屋\r\nexport function getFilterData(cityId, filter, start = 1, end = 20) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/houses',\r\n    params: {\r\n      cityId,\r\n      ...filter,\r\n      start,\r\n      end\r\n    }\r\n  })\r\n}\r\n//  房屋图像上传\r\nexport function updataImage(data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/houses/image',\r\n    data\r\n  })\r\n}\r\n/**\r\n * \r\n查询房源数据\r\n */\r\nexport function getHouseList(id) {\r\n  return request({\r\n    url: '/area/map',\r\n    method: 'get',\r\n    params: { id }\r\n  })\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapbox\":\"Map_mapbox__1Mym1\",\"bubble\":\"Map_bubble__3DrKG\",\"bubbleName\":\"Map_bubbleName__36MEj\",\"rect\":\"Map_rect__3vvjQ\",\"arrow\":\"Map_arrow__2eJaL\",\"housename\":\"Map_housename__39_C_\",\"housenum\":\"Map_housenum__3qV99\",\"houseList\":\"Map_houseList__3Raao\",\"show\":\"Map_show__2QxPB\",\"titleWrap\":\"Map_titleWrap__2q1gT\",\"listTitle\":\"Map_listTitle__2--BF\",\"titleMore\":\"Map_titleMore__3FJV2\",\"houseItems\":\"Map_houseItems__3hmfZ\"};","import React, { Component } from 'react'\r\n\r\n// 引入antd-mobile\r\nimport { NavBar, Icon } from 'antd-mobile';\r\n\r\n// 引入css样式\r\nimport style from './index.module.css'\r\n\r\n// 引入当前城市位置\r\nimport { getLocalCity } from '../../utils/method'\r\n// 获取城市房源数据\r\nimport { getHouseList, getFilterData } from '../../api/House';\r\nimport { BASE_URL } from '../../utils/request';\r\nimport HouseItem from '../../components/HouseItem'\r\n\r\n\r\n\r\nclass Map extends Component {\r\n\r\n  state = {\r\n    list: [],\r\n    isShowList: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 初始化地图\r\n    this.initMap()\r\n  }\r\n  // 初始化地图\r\n  initMap = async () => {\r\n    this.BMap = window.BMap\r\n    this.map = new this.BMap.Map(\"container\");\r\n    // 创建地址解析器实例     \r\n    let myGeo = new this.BMap.Geocoder();\r\n    // 获取当前城市/id\r\n    const { label: la, value } = await getLocalCity()\r\n    // 将地址解析结果显示在地图上，并调整地图视野    \r\n    myGeo.getPoint(null, async (point) => {\r\n      if (point) {\r\n        // 定位与缩放\r\n        this.map.centerAndZoom(point, 11);\r\n        // 添加点\r\n        this.map.addOverlay(new this.BMap.Marker(point));\r\n        // 添加控件\r\n        this.map.addControl(new this.BMap.NavigationControl());\r\n        this.map.addControl(new this.BMap.ScaleControl());\r\n        this.map.addControl(new this.BMap.OverviewMapControl());\r\n        this.map.addControl(new this.BMap.MapTypeControl());\r\n        // 渲染覆盖层\r\n        this.renderOverlay(value)\r\n        // 地图移动事件\r\n        this.map.addEventListener('movestart', () => {\r\n          const { isShowList } = this.state\r\n          if (isShowList) {\r\n            this.setState({\r\n              isShowList: false\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n      la);\r\n\r\n  }\r\n  // 渲染覆盖层\r\n  renderOverlay = async (value) => {\r\n    // 根据地图缩放层级判断覆盖物类型和缩放\r\n    const { type, zoom } = this.toTypeAndZoom()\r\n    // 获取城市/区镇/小区/房源列表\r\n    const { status, data } = await getHouseList(value)\r\n    if (status === 200) {\r\n      data.forEach(item => {\r\n        const { coord: { longitude, latitude }, count, label: name, value } = item\r\n        let point = new this.BMap.Point(longitude, latitude);\r\n        // 添加自定义文本覆盖物\r\n        let opts = {\r\n          position: point, // 指定文本标注所在的地理位置\r\n          offset: new this.BMap.Size(0, 0) // 设置文本偏移量\r\n        };\r\n        // 创建文本标注对象\r\n        let label = new this.BMap.Label(null, opts);\r\n        // 自定义文本标注样式\r\n        label.setStyle({\r\n          background: 'transparent',\r\n          border: 0\r\n        });\r\n        // 判断当前层级展示不同覆盖物与状态\r\n        let callBack\r\n        if (type === 'cercle') {\r\n          label.setContent(`\r\n          <div class=\"${style.bubble}\">\r\n            <p class=\"${style.bubbleName}\">${name}</p>\r\n            <p>${count}套</p>\r\n          </div>\r\n          `)\r\n          callBack = () => {\r\n            this.map.centerAndZoom(point, zoom)\r\n            setTimeout(() => {\r\n              this.map.clearOverlays()\r\n              this.renderOverlay(value)\r\n            }, 0)\r\n          }\r\n        } else {\r\n          label.setContent(`\r\n          <div class=\"${style.rect}\">\r\n            <span class=\"${style.housename}\">${name}</span>\r\n            <span class=\"${style.housenum}\">${count}套</span>\r\n            <i class=\"${style.arrow}\"></i>\r\n          </div>\r\n          `)\r\n          callBack = (e) => {\r\n            // 获取小区房源数据\r\n            this.getCityList(value)\r\n            // 调整文字覆盖到地图中心\r\n            this.mapCenter(e)\r\n          }\r\n        }\r\n        label.addEventListener('click', callBack)\r\n        this.map.addOverlay(label);\r\n      })\r\n    }\r\n  }\r\n  // 根据地图缩放层级判断覆盖物类型和缩放\r\n  // 计算要绘制的覆盖物类型和下一个缩放级别\r\n  // 区   -> 11 ，范围：>=10 <12\r\n  // 镇   -> 13 ，范围：>=12 <14\r\n  // 小区 -> 15 ，范围：>=14 <16\r\n  toTypeAndZoom = () => {\r\n    const zooms = this.map.getZoom()\r\n    let type, zoom;\r\n    if (zooms >= 10 && zooms < 12) {\r\n      type = 'cercle'\r\n      zoom = 13\r\n    } else if (zooms >= 12 && zooms < 14) {\r\n      type = 'cercle'\r\n      zoom = 15\r\n    } else if (zooms >= 14 && zooms < 16) {\r\n      type = 'rectangle'\r\n    }\r\n    return { type, zoom }\r\n  }\r\n  // 获取小区房源列表数据\r\n  getCityList = async (id) => {\r\n    const { status, data } = await getFilterData(id)\r\n    if (status === 200) {\r\n      this.setState({\r\n        list: data.list,\r\n        isShowList: true\r\n      })\r\n    }\r\n  }\r\n  // 调整文字覆盖到地图中心\r\n  mapCenter = (e) => {\r\n    const { clientX: startOpsX, clientY: startOpsY } = e.changedTouches[0]\r\n    const endOpsX = window.innerWidth / 2, endOpsY = (window.innerHeight - 330) / 2\r\n    const x = endOpsX - startOpsX, y = endOpsY - startOpsY\r\n    this.map.panBy(x, y)\r\n  }\r\n  // 渲染小区下房屋列表\r\n  renderHouseList = () => {\r\n    return (\r\n      <div\r\n        className={[\r\n          style.houseList,\r\n          this.state.isShowList ? style.show : ''\r\n        ].join(' ')}\r\n      >\r\n        <div className={style.titleWrap}>\r\n          <h1 className={style.listTitle}>房屋列表</h1>\r\n          <a className={style.titleMore} href=\"/home/house\">\r\n            更多房源\r\n    </a>\r\n        </div>\r\n\r\n        <div className={style.houseItems}>\r\n          {/* 房屋结构 */}\r\n          {\r\n\r\n            this.state.list.map(item => (\r\n              <HouseItem\r\n                onClick={() => this.props.history.push(`/detail/${item.houseCode}`)}\r\n                key={item.houseCode}\r\n                src={BASE_URL + item.houseImg}\r\n                title={item.title}\r\n                desc={item.desc}\r\n                tags={item.tags}\r\n                price={item.price}\r\n              />\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={style.mapbox}>\r\n        <NavBar\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={() => this.props.history.goBack()}\r\n        >\r\n          地图找房\r\n        </NavBar>\r\n        <div id=\"container\"></div>\r\n        {/* 渲染小区列表 */}\r\n        {this.renderHouseList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Map"],"sourceRoot":""}