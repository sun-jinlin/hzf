{"version":3,"sources":["page/Rent/Search/index.module.css","api/Rent/index.js","page/Rent/Search/index.js"],"names":["module","exports","getCommunity","id","name","request","method","url","params","Search","state","searchTxt","tipsList","handlerChange","val","v","trim","setState","clearTimeout","timer","setTimeout","a","cityId","status","data","handlerClick","item","props","history","replace","pathname","community","communityName","renderTips","map","onClick","className","styles","tip","getLocalCity","value","this","root","placeholder","onChange","showCancelButton","onCancel","tips","Component"],"mappings":"gFACAA,EAAOC,QAAU,CAAC,KAAO,qBAAqB,KAAO,qBAAqB,UAAY,0BAA0B,KAAO,qBAAqB,IAAM,sB,8MCG3I,SAASC,EAAaC,EAAIC,GAC/B,OAAOC,YAAQ,CACbC,OAAQ,MACRC,IAAK,kBACLC,OAAQ,CACNL,KAAIC,U,WCCWK,E,4MAEnBC,MAAQ,CAENC,UAAW,GACXC,SAAU,I,EASZC,cAAgB,SAACC,GACf,IAAIC,EAAID,EAAIE,OACJL,EAAc,EAAKD,MAAnBC,UACJI,IAAMJ,GAGR,EAAKM,SAAS,CACZN,UAAWI,IACV,WACDG,aAAa,EAAKC,OAClB,EAAKA,MAAQC,WAAU,sBAAC,gCAAAC,EAAA,sEACSnB,EAAa,EAAKoB,OAAQP,GADnC,gBACdQ,EADc,EACdA,OAAQC,EADM,EACNA,KACD,MAAXD,GACF,EAAKN,SAAS,CACZL,SAAUY,IAJQ,2CAOrB,S,EAMTC,aAAe,SAACC,GACd,EAAKC,MAAMC,QAAQC,QAAQ,CAAEC,SAAU,YAAaN,KAAM,CAAErB,GAAIuB,EAAKK,UAAW3B,KAAMsB,EAAKM,kB,EAI7FC,WAAa,WAGX,OAFqB,EAAKvB,MAAlBE,SAEQsB,KAAI,SAAAR,GAAI,OACtB,oBAAIS,QAAS,WAAQ,EAAKV,aAAaC,IAA8BU,UAAWC,IAAOC,IAAvF,SACGZ,EAAKM,eAD6CN,EAAKK,e,8FAtC9D,8BAAAV,EAAA,sEAE0BkB,cAF1B,gBAEUC,EAFV,EAEUA,MACRC,KAAKnB,OAASkB,EAHhB,gD,0EA4CA,WAAU,IACAZ,EAAYa,KAAKd,MAAjBC,QACAjB,EAAc8B,KAAK/B,MAAnBC,UAER,OACE,sBAAKyB,UAAWC,IAAOK,KAAvB,UAEE,mBACEC,YAAY,mDACZC,SAAUH,KAAK5B,cACf2B,MAAO7B,EACPkC,kBAAkB,EAClBC,SAAU,kBAAMlB,EAAQC,QAAQ,gBAIlC,oBAAIO,UAAWC,IAAOU,KAAtB,SAA6BN,KAAKR,sB,GApENe","file":"static/js/17.a8126767.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Search_root__3XRka\",\"list\":\"Search_list__2ZzXN\",\"noHistory\":\"Search_noHistory__3-Vqk\",\"tips\":\"Search_tips__3v9aU\",\"tip\":\"Search_tip__2W4Q4\"};","// 引入request\r\nimport request from '../../utils/request'\r\n\r\n// 小区关键词查询\r\nexport function getCommunity(id, name) {\r\n  return request({\r\n    method: 'get',\r\n    url: '/area/community',\r\n    params: {\r\n      id, name\r\n    }\r\n  })\r\n}","import React, { Component } from 'react'\r\n\r\nimport { SearchBar } from 'antd-mobile'\r\n\r\n\r\nimport styles from './index.module.css'\r\nimport { getLocalCity } from '../../../utils/method'\r\n// 引入api\r\nimport { getCommunity } from '../../../api/Rent'\r\n\r\nexport default class Search extends Component {\r\n\r\n  state = {\r\n    // 搜索框的值\r\n    searchTxt: '',\r\n    tipsList: []\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // 获取城市ID\r\n    const { value } = await getLocalCity();\r\n    this.cityId = value;\r\n  }\r\n  // 搜索框值改变\r\n  handlerChange = (val) => {\r\n    let v = val.trim()\r\n    const { searchTxt } = this.state\r\n    if (v === searchTxt) {\r\n      return\r\n    } else {\r\n      this.setState({\r\n        searchTxt: v\r\n      }, () => {\r\n        clearTimeout(this.timer)\r\n        this.timer = setTimeout(async () => {\r\n          const { status, data } = await getCommunity(this.cityId, v)\r\n          if (status === 200) {\r\n            this.setState({\r\n              tipsList: data\r\n            })\r\n          }\r\n        }, 600)\r\n      })\r\n    }\r\n\r\n  }\r\n  // 点击列表\r\n  handlerClick = (item) => {\r\n    this.props.history.replace({ pathname: '/rent/add', data: { id: item.community, name: item.communityName } })\r\n\r\n  }\r\n  // 渲染搜索结果列表\r\n  renderTips = () => {\r\n    const { tipsList } = this.state\r\n\r\n    return tipsList.map(item => (\r\n      <li onClick={() => { this.handlerClick(item) }} key={item.community} className={styles.tip}>\r\n        {item.communityName}\r\n      </li>\r\n    ))\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props\r\n    const { searchTxt } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 搜索框 */}\r\n        <SearchBar\r\n          placeholder=\"请输入小区或地址\"\r\n          onChange={this.handlerChange}\r\n          value={searchTxt}\r\n          showCancelButton={true}\r\n          onCancel={() => history.replace('/rent/add')}\r\n        />\r\n\r\n        {/* 搜索提示列表 */}\r\n        <ul className={styles.tips}>{this.renderTips()}</ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}